T-Systems GIT RepositorySkip to content

Activity
Milestones
Snippets
Search or jump toâ€¦

A
awx_labo_windows
Project
Repository
Files
Commits
Branches
Tags
Contributors
Graph
Compare
Charts
Issues
0
Merge Requests
0
CI / CD
Operations
Wiki
Snippets
Settings
Collapse sidebar
awx_formacion
awx_labo_windows
Repository
master
awx_labo_windows
 playbooks
 demo_tags.yml
 
RENZO LUJAN VASQUEZ's avatar
mejoro contenido de pagina web
RENZO LUJAN VASQUEZ authored 1 week ago
e09c1f76
 demo_tags.yml 2.41 KB
 
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
---
- hosts: "{{ hosts }}"
  tasks:
    - name: Create directory to download apache 
      win_file:
        path: C:\Temp
        state: directory
      tags: preinstall
    - name: Download the Apache installer
      win_get_url:
        url: https://archive.apache.org/dist/httpd/binaries/win32/httpd-2.2.25-win32-x86-no_ssl.msi
        dest: C:\Temp
      tags: preinstall
    - name: Install MSI of Apache
      win_package:
        path: 'C:\Temp\httpd-2.2.25-win32-x86-no_ssl.msi'
        state: present
      tags: install
    - name: Set ServerAdmin email adress 
      win_lineinfile:
        path: C:\Program Files (x86)\Apache Software Foundation\Apache2.2\conf\httpd.conf
        regex: '^ServerAdmin'
        line: 'ServerAdmin renzo@windows.com'
      tags: config
    - name: Creating index file
      win_copy:
        dest: C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\index.html
        content: |
          <html>
          <body>
          <h1>It works!</h1>
          Que bonito!
          Que Bonito!
          quE bOnitO!
          </body>
      tags: config
    - name: Check if Service Apache2.2 exists
      win_service:
        name: Apache2.2 
      register: apache_service 
      tags: config
    - name: debug vemos que hemos guardado en la variable apache_service
      debug:
        msg: "{{ apache_service }}"
      tags: config
    - name: create apache service
      win_shell: '"C:\Program Files (x86)\Apache Software Foundation\Apache2.2\bin\httpd.exe" -k install'
      args:
        executable: cmd
      when: not apache_service.exists
      tags: config
    - name: Iniciamos el servicio Apache2.2 
      win_service:
        name: Apache2.2 
        state: started 
      tags: config
    - name: Abrimos el puerto 80
      win_firewall_rule:
        name: HTTP
        localport: 80
        action: allow
        direction: in
        protocol: tcp
        state: present
        enabled: yes
      tags: config
    - name: Uninstall MSI of Apache
      win_package:
        path: 'C:\Temp\httpd-2.2.25-win32-x86-no_ssl.msi'
        state: absent
      tags: uninstall
    - name: Remove Service Apache2.2 
      win_service:
        name: Apache2.2 
        state: absent
      tags: uninstall
    - name: Cerramos el puerto 80
      win_firewall_rule:
        name: HTTP
        localport: 80
        action: allow
        direction: in
        protocol: tcp
        state: absent
      tags: uninstall
